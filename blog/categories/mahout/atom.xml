<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: mahout | 研究研究]]></title>
  <link href="http://www.yanjiuyanjiu.com/blog/categories/mahout/atom.xml" rel="self"/>
  <link href="http://www.yanjiuyanjiu.com/"/>
  <updated>2013-07-23T22:56:19+08:00</updated>
  <id>http://www.yanjiuyanjiu.com/</id>
  <author>
    <name><![CDATA[soulmachine]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Mhout KMeans 结果分析]]></title>
    <link href="http://www.yanjiuyanjiu.com/blog/20130707"/>
    <updated>2013-07-07T17:04:00+08:00</updated>
    <id>http://www.yanjiuyanjiu.com/blog/mahout-kmeans-results-analysis</id>
    <content type="html"><![CDATA[<h1 id="kmeans">运行KMeans示例</h1>
<p>运行KMeans示例有三种方法，参考前篇一篇博客，<a href="">安装mahout</a>。</p>

<p>通过阅读<code>examples\src\main\java\org\apache\mahout\clustering\syntheticcontrol\kmeans\Job.java</code>和<code>integration\src\main\java\org\apache\mahout\clustering\conversion\InputDriver.java</code>的代码，运行KMeans示例还有第4种方法</p>

<p>利用<code>InputDriver</code>将文本格式的向量转化为Mahout能识别的向量，</p>

<pre><code>$ hadoop jar ~/mahout-distribution-0.7/mahout-examples-0.7-job.jar org.apache.mahout.clustering.conversion.InputDriver -i testdata -o vector
</code></pre>

<p>利用 mahout 自带的命令行工具，</p>

<pre><code>$ mahout kmeans -i vector -o output -dm org.apache.mahout.common.distance.EuclideanDistanceMeasure -c centroids -k 6 -cd 0.5 -x 10 -ow 
</code></pre>

<h1 id="section">分析聚类结果</h1>

<h2 id="section-1">查看结果</h2>

<pre><code>$ hadoop fs -lsr output
$ mahout seqdumper -i output/clusteredPoints -o clusteredPoints
$ vim clusteredPoints
$ mahout clusterdump -i output/clusters-9-final -o clusters --pointsDir output/clusteredPoints
$ vim clusters
</code></pre>

<h2 id="section-2">分析结果</h2>

<h1 id="section-3">参考资料</h1>
<ol>
  <li><a href="https://cwiki.apache.org/confluence/display/MAHOUT/Clustering+of+synthetic+control+data">Clustering of synthetic control data</a></li>
  <li><a href="http://blog.csdn.net/aidayei/article/details/6665530">mahout中的kmeans结果分析</a></li>
</ol>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[安装 mahout]]></title>
    <link href="http://www.yanjiuyanjiu.com/blog/20130704"/>
    <updated>2013-07-04T15:47:00+08:00</updated>
    <id>http://www.yanjiuyanjiu.com/blog/installing-mahout</id>
    <content type="html"><![CDATA[<p><strong>前提条件</strong>：已经安装好Hadoop集群，并启动。参考我的博客，<a href="http://www.yanjiuyanjiu.com/blog/20130612">在CentOS上安装Hadoop</a>，<a href="http://www.yanjiuyanjiu.com/blog/20120103">在Ubuntu上安装Hadoop</a>。</p>

<h2 id="section">编译源码进行安装</h2>

<p>见官网文档， <a href="https://cwiki.apache.org/confluence/display/MAHOUT/Mahout+Wiki#MahoutWiki-Installation%2FSetup">Installation/Setup</a></p>

<p>不推荐这个方式，太繁琐。</p>

<h2 id="section-1">下载预编译好的压缩包进行安装</h2>

<p>这种方法最简单。</p>

<h3 id="section-2">下载</h3>

<p>在首页点击右侧的”Download Mahout”按钮，下载预编译好的二进制包。我下载的是mahout-distribution-0.7.tar.gz。</p>

<h3 id="section-3">解压</h3>

<p>解压到$HOME目录</p>

<pre><code>$ tar -zxf mahout-distribution-0.7.tar.gz
$ cd mahout-distribution-0.7
</code></pre>

<h3 id="section-4">配置</h3>

<p>只需要在Master这台机器上配置即可。</p>

<p>设置 HADOOP_PREFIX 环境变量，把Hadoop的安装位置告诉Mahout。或者设置HADOOP_HOME环境变量，不过HADOOP_HOME已经是derecated了，不建议使用。</p>

<p>设置 HADOOP_CONF_DIR，把Hadoop配置文件的位置告诉Mahout。</p>

<p>[可选]为了方便，将mahout命令加入PATH。</p>

<p>将Mahout的jar加入CLASSPATH，在编译代码时需要。</p>

<pre><code>$ vim ~/.bash_profile
export HADOOP_PREFIX=$HOME/hadoop-1.1.2
export HADOOP_CONF_DIR=$HADOOP_PREFIX/conf
export PATH=$PATH:$HOME/mahout-distribution-0.7/bin
export CLASSPATH=$CLASSPATH:$HOME/mahout-distribution-0.7/mahout-core-0.7.jar
$ source  ~/.bash_profile
</code></pre>

<p>以上配置都是通过阅读 mahout这个脚本才知道的。</p>

<pre><code>$ vim mahout-distribution-0.7/bin/mahout
</code></pre>

<p>打开这个脚本，可以看到所有配置，一目了然。</p>

<h2 id="kmeans-">运行自带的 KMeans 例子</h2>

<p>主要参考官网文档，<a href="https://cwiki.apache.org/confluence/display/MAHOUT/Clustering+of+synthetic+control+data">Clustering of synthetic control data</a>。</p>

<h3 id="section-5">下载数据</h3>

<p>下载地址：<a href="http://archive.ics.uci.edu/ml/databases/synthetic_control/synthetic_control.data">synthetic_control.data</a><br />
<a href="http://archive.ics.uci.edu/ml/databases/synthetic_control/synthetic_control.data.html">数据格式说明</a></p>

<h3 id="hdfs">上传到HDFS</h3>

<pre><code>$ hadoop fs -mkdir testdata
$ hadoop fs -put ./synthetic_control.data testdata
</code></pre>

<p>Mahout自带的mahout-examples-0.7-job.jar 默认从 testdata目录读取数据，所以目录必须命名为testdata</p>

<h3 id="kmeans">运行自带的kmeans算法</h3>

<pre><code>$ mahout org.apache.mahout.clustering.syntheticcontrol.kmeans.Job
</code></pre>

<p>或者</p>

<pre><code>$ hadoop jar ~/mahout-distribution-0.7/mahout-examples-0.7-job.jar org.apache.mahout.clustering.syntheticcontrol.kmeans.Job
</code></pre>

<p>或者</p>

<pre><code>$ mahout jar ~/mahout-distribution-0.7/mahout-examples-0.7-job.jar org.apache.mahout.clustering.syntheticcontrol.kmeans.Job
</code></pre>

<p>三者是等价的。感兴趣的话去阅读 <code>bin/mahout</code> 这个脚本，看看最后几行，包含 <code>exec</code> 的那几行代码。</p>

<h3 id="section-6">查看结果</h3>

<pre><code>$ hadoop fs -lsr output
</code></pre>

<p>如果看到以下结果，说明算法运行成功，Mahout的安装也就成功了。</p>

<pre><code>clusteredPoints  clusters-0  clusters-1  clusters-10  clusters-2  clusters-3  clusters-4 clusters-5  clusters-6  clusters-7  clusters-8  clusters-9  data
</code></pre>

<h2 id="section-7">参考资料</h2>
<ol>
  <li><a href="https://cwiki.apache.org/confluence/display/MAHOUT/Mahout+Wiki#MahoutWiki-Installation%2FSetup">Installation/Setup</a></li>
  <li><a href="http://www.cnblogs.com/linjiqin/archive/2013/03/15/2961649.html">Mahout安装与配置</a></li>
</ol>
]]></content>
  </entry>
  
</feed>
